<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:mx="library://ns.adobe.com/flex/mx"
         fontSize="12">
	
	<fx:Script>
		<![CDATA[
			import com.j_nid.utils.Utils;
			
			[Bindable]
            public var orders:Array;
            [Bindable]
            public var numPages:int;
            [Bindable]
            public var pageNum:int;
            [Bindable]
            public var personName:String;
            [Bindable]
            public var startDate:Date;
            [Bindable]
            public var endDate:Date;
            [Bindable]
            public var total:Number;
            
			private function formatCreated(item:Object,
                                           column:DataGridColumn):String {
                                            
				if (item[column.dataField] == "ยอดค้างยกมา")
					return item[column.dataField];
				var date:Date = new Date(Date.parse(item[column.dataField]));
				return Utils.formatDate(date, "DD-MM-YYYY");
            }
		]]>
	</fx:Script>
	
	<s:states>
        <s:State name="base"/>
        <s:State name="middle"/>
    </s:states>
    
    <s:Label id="pageLbl" text="{pageNum}/{numPages}" textAlign="center"
             left="329" top="10" width="50" height="24"/>
	<s:Label id="nameLbl" text="{personName}" top="92" left="25"
             width="105" height="24"/>
	<s:Label id="startDateLbl" text="ตั้งแต่วันที่ {Utils.formatDate(startDate, 'DD/MM/YY')} ถึง"
             textAlign="right" top="92" left="130" width="130" height="24"/>
    <s:Label id="dateLabel"	text="{Utils.formatDate(endDate, 'DD/MM/YY')}"
             top="92" left="279" width="100" height="24"/>
    <mx:PrintDataGrid id="orderDg" dataProvider="{orders}"
                      top="120" right="2" left="2" height="330" rowHeight="20"
                      styleName="printDataGrid">
		<mx:columns>
            <mx:DataGridColumn width="12"/>
            <mx:DataGridColumn headerText="วันที่" dataField="created"
                               labelFunction="formatCreated" width="67"/>
            <mx:DataGridColumn width="12"/>
            <mx:DataGridColumn width="12"/>
            <mx:DataGridColumn headerText="ยอดค้าง" dataField="outstanding"
                               labelFunction="Utils.priceLabelFunction"
                               textAlign="right" width="30"/>
        </mx:columns>
	</mx:PrintDataGrid>
	<s:Label id="totalDescLbl" text="รวมค้างจ่ายทั้งสิ้น"
             bottom="45" left="180" height="24" width="100" includeIn="base"/>
    <s:Label id="totalLbl" text="{Utils.formatPrice(total)}"
             text.middle="มีต่อ" textAlign="right" textAlign.middle="center"
             bottom="45" left="279" bottom.middle="65"
             height="24" width="100"/>
</s:Group>
