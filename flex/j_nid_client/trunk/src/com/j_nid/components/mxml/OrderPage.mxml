<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%">

	<mx:Script>
		<![CDATA[
			import com.j_nid.utils.PrinterUtils;
			import com.j_nid.models.Order;
			import com.j_nid.models.OrderItem;
			import com.j_nid.models.JNidModelLocator;
			
			[Bindable]
			private var model:JNidModelLocator = JNidModelLocator.getInstance();
			
			private function printOrder(e:MouseEvent):void {
				var order:Order = Order(orderList.selectedItem);
				PrinterUtils.printOrder(order);
			}
		]]>
	</mx:Script>
	
	<mx:DateFormatter id="dateFormatter" formatString="DD-MM-YY J:NN:SS"/>
	
	<mx:TabNavigator width="220" height="100%">
		<mx:Canvas label="Status" width="100%" height="100%">
		</mx:Canvas>
		<mx:Canvas label="Date" width="100%" height="100%">
		</mx:Canvas>
		<mx:Canvas label="Name" width="100%" height="100%">
		</mx:Canvas>
	</mx:TabNavigator>
	
	<mx:Panel width="250" height="100%" layout="absolute" title="Oreder List">
		<mx:List id="orderList" dataProvider="{model.orders}" width="100%" height="100%"/>
	</mx:Panel>
	
	<mx:Panel width="100%" height="100%" layout="vertical" title="Order">
		<mx:HBox width="100%" height="35" paddingTop="5" paddingRight="5" horizontalAlign="right">
			<mx:Label text="{orderList.selectedItem.person.name}"/>
			<mx:Label text="{dateFormatter.format(orderList.selectedItem.created)}"/>
		</mx:HBox>
		
		<mx:DataGrid id="orderItemList" dataProvider="{orderList.selectedItem.orderItems}"
			width="100%" height="100%" textAlign="center" selectable="false">
			<mx:columns>
				<mx:DataGridColumn headerText="Qty" dataField="quantity" width="50"/>
				<mx:DataGridColumn headerText="Name" dataField="name"/>
				<mx:DataGridColumn headerText="Unit" dataField="unit" width="50"
					textAlign="right"/>
				<mx:DataGridColumn headerText="Price/Unit" dataField="pricePerUnit" width="85"
					textAlign="right"/>
				<mx:DataGridColumn headerText="Total" dataField="total" width="85" 
					textAlign="right"/>
			</mx:columns>
		</mx:DataGrid>
		
		<mx:HBox width="100%" height="35" paddingRight="5" horizontalAlign="right">
			<mx:Label text="{orderList.selectedItem.total}"/>
		</mx:HBox>
		
		<mx:ControlBar horizontalAlign="right">
			<mx:Button label="Print" click="printOrder(event)"/>
		</mx:ControlBar>
	</mx:Panel>
</mx:HBox>
