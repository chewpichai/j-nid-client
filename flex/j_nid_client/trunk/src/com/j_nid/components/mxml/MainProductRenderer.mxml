<?xml version="1.0" encoding="utf-8"?>
<mx:HBox
    xmlns:mx="http://www.adobe.com/2006/mxml"
	doubleClickEnabled="true" 
	doubleClick="doubleClickListener(event)"
	creationComplete="init(event)"
	paddingLeft="5"
	paddingRight="5"
	width="100%"
	height="100%">
	
	<mx:Script>
		<![CDATA[
		    import com.j_nid.utils.CairngormUtils;
		    import com.j_nid.events.JNidEvent;
		    import mx.events.FlexEvent;
			import com.j_nid.controls.ApplicationManager;
			import com.j_nid.models.Product;
			import mx.core.Application;
			import mx.core.UIComponent;
			
		    private var appMgr:ApplicationManager =
                ApplicationManager.getInstance();
            private var priceEditor:ProductPriceEditor;
            
            private function init(e:FlexEvent):void {
                
            }
            
            private function doubleClickListener(e:MouseEvent):void {
                var product:Product = Product(data);
                priceEditor =
                    ProductPriceEditor(appMgr.createPopUp(ProductPriceEditor));
                priceEditor.product = product;
                priceEditor.x = e.stageX;
                var appHeight:Number = appMgr.mainApp.height;
                var appWidth:Number = appMgr.mainApp.width;
                if (e.stageX + priceEditor.width > appWidth) {
                    priceEditor.x = appWidth - (priceEditor.width + 10);
                }
                priceEditor.y = e.stageY;
                if (e.stageY + priceEditor.height > appHeight) {
                    priceEditor.y = appHeight - (priceEditor.height + 10);
                }
            }
        ]]>
    </mx:Script>
    
    <mx:Fade id="fadeIn"
        alphaFrom="0"
        alphaTo="0.8"/>
    
    <mx:Fade id="fadeOut"
        alphaFrom="0.8"
        alphaTo="0"/>
    
    <mx:Label
        text="{data.name}"
        color="{data.productType.color}" 
        textAlign="left"
        width="100%"/>
        
    <mx:Label id="costLbl"
        text="{data.costPerUnit}"
        textAlign="right" 
        alpha="0"
        rollOverEffect="{fadeIn}"
        rollOutEffect="{fadeOut}"/>
    
    <mx:Label id="priceLbl"
        text="{data.pricePerUnit}"
        textAlign="right"/>
</mx:HBox>
